(function(){var b=0,g=[],i={},e={},a={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},h=/[<>&\"\']/g;function d(){this.returnValue=false}function f(){this.cancelBubble=true}(function(j){var k=j.split(/,/),l,n,m;for(l=0;l<k.length;l+=2){m=k[l+1].split(/ /);for(n=0;n<m.length;n++){e[m[n]]=k[l]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");var c={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,mimeTypes:e,extend:function(j){c.each(arguments,function(k,l){if(l>0){c.each(k,function(n,m){j[m]=n})}});return j},cleanName:function(j){var k,l;l=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(k=0;k<l.length;k+=2){j=j.replace(l[k],l[k+1])}j=j.replace(/\s+/g,"_");j=j.replace(/[^a-z0-9_\-\.]+/gi,"");return j},addRuntime:function(j,k){k.name=j;g[j]=k;g.push(k);return k},guid:function(){var j=new Date().getTime().toString(32),k;for(k=0;k<5;k++){j+=Math.floor(Math.random()*65535).toString(32)}return(c.guidPrefix||"")+j+(b++).toString(32)},buildUrl:function(k,j){var l="";c.each(j,function(n,m){l+=(l?"&":"")+escape(m)+"="+escape(n)});if(l){k+=(k.indexOf("?")>0?"&":"?")+l}return k},each:function(n,o){var m,l,k,j;if(n){m=n.length;if(m===l){for(k in n){if(n.hasOwnProperty(k)){if(o(n[k],k)===false){return}}}}else{for(j=0;j<m;j++){if(o(n[j],j)===false){return}}}}},formatSize:function(j){if(j>1048576){return Math.round(j/1048576,1)+" MB"}if(j>1024){return Math.round(j/1024,1)+" KB"}return j+" b"},getPos:function(k,o){var p=0,n=0,r,q=document,l,m;k=k;o=o||q.body;function j(v){var t,u,s=0,w=0;if(v){u=v.getBoundingClientRect();t=q.compatMode==="CSS1Compat"?q.documentElement:q.body;s=u.left+t.scrollLeft;w=u.top+t.scrollTop}return{x:s,y:w}}if(k.getBoundingClientRect&&(navigator.userAgent.indexOf("MSIE")>0&&q.documentMode!==8)){l=j(k);m=j(o);return{x:l.x-m.x,y:l.y-m.y}}r=k;while(r&&r!=o&&r.nodeType){p+=r.offsetLeft||0;n+=r.offsetTop||0;r=r.offsetParent}r=k.parentNode;while(r&&r!=o&&r.nodeType){p-=r.scrollLeft||0;n-=r.scrollTop||0;r=r.parentNode}return{x:p,y:n}},getSize:function(j){return{w:j.clientWidth||j.offsetWidth,h:j.clientHeight||j.offsetHeight}},parseSize:function(j){var k;if(typeof(j)=="string"){j=/^([0-9]+)([mgk]+)$/.exec(j.toLowerCase().replace(/[^0-9mkg]/g,""));k=j[2];j=+j[1];if(k=="g"){j*=1073741824}if(k=="m"){j*=1048576}if(k=="k"){j*=1024}}return j},xmlEncode:function(j){return j?(""+j).replace(h,function(k){return a[k]?"&"+a[k]+";":k}):j},toArray:function(l){var k,j=[];for(k=0;k<l.length;k++){j[k]=l[k]}return j},addI18n:function(j){return c.extend(i,j)},translate:function(j){return i[j]||j},addEvent:function(k,j,l){if(k.attachEvent){k.attachEvent("on"+j,function(){var m=window.event;if(!m.target){m.target=m.srcElement}m.preventDefault=d;m.stopPropagation=f;l(m)})}else{if(k.addEventListener){k.addEventListener(j,l,false)}}}};c.Uploader=function(l){var k={},o,n=[],p;o=new c.QueueProgress();l=c.extend({chunk_size:0,max_file_size:"1gb",multi_selection:true,filters:[{title:"Image files",extensions:"jpg,gif,png"}]},l);function m(){var q;if(this.state==c.STARTED&&p<n.length){q=n[p++];if(q.status==c.QUEUED){this.trigger("UploadFile",q)}else{m.call(this)}}else{this.stop()}}function j(){var q;o.reset();for(q=0;q<n.length;q++){o.size+=n[q].size;o.loaded+=n[q].loaded;if(n[q].status==c.DONE){o.uploaded++}else{if(n[q].status==c.FAILED){o.failed++}else{o.queued++}}}o.percent=o.size>0?Math.ceil(o.loaded/o.size*100):0}c.extend(this,{state:c.STOPPED,features:{},files:n,settings:l,total:o,id:c.guid(),init:function(){var v=this,w,s,r,u=0,t;l.page_url=l.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(l.url)){l.url=l.page_url+l.url}l.chunk_size=c.parseSize(l.chunk_size);l.max_file_size=c.parseSize(l.max_file_size);v.bind("FilesAdded",function(x,A){var z,y;for(z=0;z<A.length;z++){y=A[z];y.loaded=0;y.percent=0;y.status=c.QUEUED;if(A[z].size<=l.max_file_size){n.push(y)}}v.trigger("QueueChanged");v.refresh()});if(l.unique_names){v.bind("UploadFile",function(x,y){y.target_name=y.id+".tmp"})}v.bind("UploadProgress",function(x,y){if(y.status==c.QUEUED){y.status=c.UPLOADING}y.percent=y.size>0?Math.ceil(y.loaded/y.size*100):0;j()});v.bind("QueueChanged",j);v.bind("FileUploaded",function(x,y){y.status=c.DONE;x.trigger("UploadProgress",y);m.call(v)});if(l.runtimes){s=[];t=l.runtimes.split(/\s?,\s?/);for(w=0;w<t.length;w++){if(g[t[w]]){s.push(g[t[w]])}}}else{s=g}function q(){var x=s[u++];if(x){x.init(v,function(y){if(y&&y.success){v.trigger("Init",{runtime:x.name});v.trigger("PostInit");v.refresh()}else{q()}})}}q()},refresh:function(){this.trigger("Refresh")},start:function(){if(this.state!=c.STARTED){p=0;this.state=c.STARTED;this.trigger("StateChanged");m.call(this)}},stop:function(){if(this.state!=c.STOPPED){this.state=c.STOPPED;this.trigger("StateChanged")}},getFile:function(r){var q;for(q=n.length-1;q>=0;q--){if(n[q].id===r){return n[q]}}},removeFile:function(r){var q;for(q=n.length-1;q>=0;q--){if(n[q].id===r.id){return this.splice(q,1)[0]}}},splice:function(s,q){var r;r=n.splice(s,q);this.trigger("FilesRemoved",r);this.trigger("QueueChanged");return r},trigger:function(r){var t=k[r.toLowerCase()],s,q;if(t){q=Array.prototype.slice.call(arguments);q[0]=this;for(s=0;s<t.length;s++){if(t[s].func.apply(t[s].scope,q)===false){return false}}}return true},bind:function(q,s,r){var t;q=q.toLowerCase();t=k[q]||[];t.push({func:s,scope:r||this});k[q]=t},unbind:function(q,s){var t=k[q.toLowerCase()],r;if(t){for(r=t.length-1;r>=0;r--){if(t[r].func===s){t.splice(r,1)}}}}})};c.File=function(m,k,l){var j=this;j.id=m;j.name=k;j.size=l;j.loaded=0;j.percent=0;j.status=0};c.Runtime=function(){this.init=function(j,k){}};c.QueueProgress=function(){var j=this;j.size=0;j.loaded=0;j.uploaded=0;j.failed=0;j.queued=0;j.percent=0;j.reset=function(){j.size=j.loaded=j.uploaded=j.failed=j.queued=j.percent=0}};c.runtimes={};window.plupload=c})();